<h1 class="landing-page__gettingstarted">Photo Print</h1>
<div class="bx--row landing-page__breadcrumb">
	<div class="bx--col-lg-12">
		<nav aria-label="Page navigation">
			<img src='/img/favicon.ico' onload="waitAndReload()" width="1" height="1"/>
			<script>
				function waitAndReload() {
					{{#if tokenExist}}
					{{else if showReject}}
					{{else}}
					setTimeout(function () {
	    				window.location.reload();
    				}, 5000);
					{{/if}}
				}
			</script>
			<ol class="bx--breadcrumb">
				<li class="bx--breadcrumb-item"><a href="/kiosk" class="bx--link">Back to home</a></li>
				<li class="bx--breadcrumb-item"><a href="/services/refresh?id={{authReq.auth_req_id}}" class="bx--link" style="color:black">Refresh</a></li>
			</ol>
		</nav>
	</div>
</div>
<div class="bx--row profile-content">
	<div class="ci--table-container bx--col">
		<div data-tabs class="bx--tabs">
			<div class="bx--tabs-trigger" tabindex="0">
				<a href="javascript:void(0)" class="bx--tabs-trigger-text" tabindex="-1"></a>
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" width="16"
					height="16" viewBox="0 0 16 16" aria-hidden="true">
					<path d="M8 11L3 6 3.7 5.3 8 9.6 12.3 5.3 13 6z"></path>
				</svg>
			</div>
			<ul class="bx--tabs__nav bx--tabs__nav--hidden" role="tablist">
				<li class="bx--tabs__nav-item bx--tabs__nav-item--selected " data-target=".profile-content-tab"
					role="tab" aria-selected="true">
					<a tabindex="0" id="tab-link-1-default" class="darktabs bx--tabs__nav-link"
						href="javascript:void(0)" role="tab" aria-controls="tab-panel-1-default">Transaction</a>
				</li>
				{{#if tokenExist}}
				<li class="bx--tabs__nav-item " data-target=".profile-content-tab2" role="tab">
					<a tabindex="0" id="tab-link-2-default" class="darktabs bx--tabs__nav-link"
						href="javascript:void(0)" role="tab" aria-controls="tab-panel-2-default">ID token</a>
				</li>
				<li class="bx--tabs__nav-item " data-target=".profile-content-tab3" role="tab">
					<a tabindex="0" id="tab-link-3-default" class="darktabs bx--tabs__nav-link"
						href="javascript:void(0)" role="tab" aria-controls="tab-panel-3-default">Introspection</a>
				</li>
				{{/if}}
			</ul>
		</div>
		<div class="bx--tab-content">
			<div id="tab-panel-1-default" class="profile-content-tab" role="tabpanel"
				aria-labelledby="tab-link-1-default" aria-hidden="false">
				<div>
					<div class="bx--data-table-container">
						<h1 class="landing-page__gettingstarted">Transaction Details:</h1>
						<table class="bx--data-table bx--data-table--no-border">
							<thead>
								<tr class="tab-dataTable-row">
									<th scope="col"><span class="bx--table-header-label">Name</span></th>
									<th scope="col"><span class="bx--table-header-label">Value</span></th>
								</tr>
							</thead>
							<tbody aria-live="polite">
								<tr>
									<td>Transaction ID:</td>
									<td>{{authReq.auth_req_id}}</td>
								</tr>
								<tr>
									<td>Summary:</td>
									<td>{{authReq.binding_message}}</td>
								</tr>
								<tr>
									<td>Username Identification:</td>
									<td>{{authReq.login_hint}}</td>
								</tr>
								{{#if qrExist}}
								<tr>
									<td>&nbsp;</td>
									<td><img src="{{authReq.qr}}"/><br/>{{authReq.user_authorize_uri}}</td>
								</tr>
								{{/if}}
							</tbody>
						</table>
					</div>
				</div>
				<div data-notification class="ci--notification-error bx--inline-notification bx--inline-notification--error"
					role="alert">
					<div class="bx--inline-notification__details">
						{{#if tokenExist}}
						<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor"
							class="bx--inline-notification__icon" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true">
							<path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>
							<path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
						</svg>
						<div class="bx--inline-notification__text-wrapper">
							<p class="bx--inline-notification__title">Payment transaction has been approved. Start printing your photo ...</p>
						</div>
						{{else if showReject}}
						<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg"
							class="bx--inline-notification__icon" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true">
							<path d="M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z"></path>
							<path d="M13.5,14.5l-8-8l1-1l8,8L13.5,14.5z" data-icon-path="inner-path" opacity="0"></path>
						</svg>
						<div class="bx--inline-notification__text-wrapper">
							<p class="bx--inline-notification__title">User has rejected this transaction.</p>
						</div>
						{{else if qrExist}}
						<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" 
							class="bx--inline-notification__icon" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true">
							<path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
							<path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
							<path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
						</svg>
						<div class="bx--inline-notification__text-wrapper">
							<p class="bx--inline-notification__title">Waiting for payment. Please follow the link above to continue the transaction.</p>
						</div>
						{{else}}
						<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" 
							class="bx--inline-notification__icon" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true">
							<path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
							<path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
							<path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
						</svg>
						<div class="bx--inline-notification__text-wrapper">
							<p class="bx--inline-notification__title">Waiting for payment. Please check your phone for any push notification from MyBank.</p>
						</div>
						{{/if}}
					</div>
				</div>			
			</div>
			{{#if tokenExist}}
			<div id="tab-panel-2-default" class="profile-content-tab2" role="tabpanel"
				aria-labelledby="tab-link-2-default" aria-hidden="true" hidden>
				<div>
					<div style="padding-top:.125rem">
						<div class="bx--data-table-header">
							<h4 class="bx--data-table-header__title">Full ID token</h4>
							<p class="bx--data-table-header__description">This is the full ID token response from your
								OIDC session</p>
						</div>
						<pre>
							<code class="railscasts json">{{fullJson}}</code>
						</pre>
					</div>
				</div>
			</div>
			<div id="tab-panel-3-default" class="profile-content-tab3" role="tabpanel"
				aria-labelledby="tab-link-3-default" aria-hidden="true" hidden>
				<div>
					<div style="padding-top:.125rem">
						<div class="bx--data-table-header">
							<h4 class="bx--data-table-header__title">Introspection payload</h4>
							<p class="bx--data-table-header__description">This is the introspection response</p>
						</div>
						<pre>
							<code class="railscasts json">{{introspection}}</code>
						</pre>
					</div>
				</div>
			</div>
			{{/if}}
		</div>
	</div>
</div>